extends layout

block content
  nav.navbar.navbar-expand-lg.navbar-light.bg-light
    a.navbar-brand(href='#') Mapa das Ruas de Braga
    button.navbar-toggler(type='button', data-toggle='collapse', data-target='#navbarNav', aria-controls='navbarNav', aria-expanded='false', aria-label='Toggle navigation')
      span.navbar-toggler-icon
    .collapse.navbar-collapse#navbarNav
      ul.navbar-nav.ml-auto
        li.nav-item
          a.nav-link(href='/logout') Logout

  .container.mt-5
    .card
      .card-header.bg-primary.text-white
        h1.mb-0= Rua.nome

      .card-body
        .text-center
          h3.mt-4.mb-3
            b Vistas atuais
          .row
            each figura in Rua.figuras
              if figura.imagem.path.startsWith('../atual')
                .col-md-4.mb-4
                  .card
                    img.card-img-top(src=`${figura.imagem.path.slice(2)}`, alt="Imagem atual")
                    .card-body
                      h5.card-title= figura.legenda

        hr

        .text-center
          h3.mt-4.mb-3
            b Vistas antigas
          .row
            each figura in Rua.figuras
              if figura.imagem.path.startsWith('../imagem')
                .col-md-4.mb-4
                  .card
                    img.card-img-top(src=`${figura.imagem.path.slice(2)}`, alt="Imagem antiga")
                    .card-body
                      h5.card-title= figura.legenda

        hr

        .text-center
          h3.mt-4.mb-3
            b Descrição
          .border.p-3
            p!= Rua.paragrafo.texto

        hr

        .text-center
          h3.mt-4.mb-3
            b Casas
          table.table.table-hover.mt-3
            thead.thead-dark
              tr
                th Casa
                th Dono
                th Custo
                th Sobre
            tbody
              each casa in Rua.casas
                tr
                  td= casa.numero
                  td= casa.enfiteutas
                  td= casa.foro
                  td
                    p!= casa.desc.texto

        hr

        .text-center
          h3.mt-4.mb-3
            b Comentários
          p.font-weight-bold Posts
          form(method="POST", action=`/${Rua._id}/post`)
            .form-group
              label(for="texto") Comentário
              input.form-control(type="text", name="texto", id="texto", placeholder="Escreva seu comentário")
            button.btn.btn-primary(type="submit") Publicar

        hr

        each comentario in Rua.comentarios
          .card.card-body.mb-4
            .d-flex.justify-content-between
              h5.card-title.mb-1 Autor: #{comentario.autor}
              h6.text-muted.mb-1 Data: #{comentario.data}
            p.card-text #{comentario.texto}
            if(level === "Admin")
              div.btn-group
                a.btn.btn-danger.btn-sm(href="/" + Rua._id + "/unpost/" + comentario._id) Eliminar

    .card-footer.text-center
      a.btn.btn-success(href='/ruas') Voltar à lista
      h5.mt-3.mb-0 Generated by Group 38 in #{Data}